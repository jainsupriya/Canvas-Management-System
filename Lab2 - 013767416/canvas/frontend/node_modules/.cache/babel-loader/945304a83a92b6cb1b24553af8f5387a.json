{"ast":null,"code":"import _classCallCheck from \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/src/components/CourseDetails/Assignment/GradeAssignment.js\";\nimport React, { Component } from 'react';\nimport { pdfjs } from 'react-pdf';\nimport Moment from 'react-moment';\nimport OpenSubmissionFile from './OpenSubmisseionFile';\nimport { getSubmissions } from \"../../../actions\";\nimport { connect } from 'react-redux';\n\nvar axios = require('axios');\n\npdfjs.GlobalWorkerOptions.workerSrc = \"//cdnjs.cloudflare.com/ajax/libs/pdf.js/\".concat(pdfjs.version, \"/pdf.worker.js\");\n\nvar GradeAssignment =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(GradeAssignment, _Component);\n\n  function GradeAssignment(props) {\n    var _this;\n\n    _classCallCheck(this, GradeAssignment);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(GradeAssignment).call(this, props));\n\n    _this.closeFile = function () {\n      _this.setState({\n        fileToOpen: ''\n      });\n    };\n\n    _this.handleOpenFile = function (submissionid, userId) {\n      var submission = _this.state.studentdata.filter(function (submission) {\n        return submission.Userid === userId;\n      });\n\n      console.log(submission);\n      axios.defaults.withCredentials = true;\n      axios.get('/submission/download', {\n        params: {\n          filename: submission[0].Filename\n        }\n      }).then(function (res) {\n        if (res.status === 200) {\n          console.log(res.data);\n          var preview = 'data:application/pdf;base64, ' + res.data;\n\n          _this.setState({\n            fileToOpen: preview\n          });\n\n          _this.setState({\n            open: true,\n            userid: userId\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      studentdata: [],\n      fileToOpen: '',\n      open: false,\n      studentid: ''\n    };\n    return _this;\n  }\n\n  _createClass(GradeAssignment, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.props.getSubmissions(this.props.assignmentid);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.submissions) {\n        console.log(nextProps.submissions.submissions);\n        this.setState({\n          studentdata: nextProps.submissions.submissions\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var data = Array.from(this.state.studentdata).map(function (data, key) {\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, data.Username), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: function onClick() {\n            return _this2.handleOpenFile(data._id, data.Userid);\n          },\n          download: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, data.Filename)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, \" \", React.createElement(Moment, {\n          format: \"lll\",\n          date: new Date(data.Submissiontime),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }), \" \"), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, data.Graded));\n      });\n      if (this.state.fileToOpen) return React.createElement(OpenSubmissionFile, {\n        assignmentid: this.props.assignmentid,\n        closeFile: this.closeFile,\n        fileToOpen: this.state.fileToOpen,\n        points: this.props.points,\n        userid: this.state.userid,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      });else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 78\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          cellpadding: \"0\",\n          cellspacing: \"0\",\n          className: \"table\",\n          cellSpacing: \"0\",\n          style: {\n            marginLeft: 20,\n            paddingTop: 0,\n            maxWidth: 800\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          style: {\n            color: \"#094D98\"\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \"Student Name\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, \"Submission\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, \"Submission Time\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 84\n          },\n          __self: this\n        }, \"Graded\")), React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 86\n          },\n          __self: this\n        }, data), React.createElement(\"tr\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }))));\n      }\n    }\n  }]);\n\n  return GradeAssignment;\n}(Component);\n\n;\n\nfunction mapStateToProps(state) {\n  return {\n    submissions: state.submissions\n  };\n}\n\nexport default connect(mapStateToProps, {\n  getSubmissions: getSubmissions\n})(GradeAssignment);","map":{"version":3,"sources":["/Users/supriyajain/Desktop/273/canvas/tmp_CMPE273-SP19-18/CMPE273-SP19-18/Lab2 - 013767416/canvas/frontend/src/components/CourseDetails/Assignment/GradeAssignment.js"],"names":["React","Component","pdfjs","Moment","OpenSubmissionFile","getSubmissions","connect","axios","require","GlobalWorkerOptions","workerSrc","version","GradeAssignment","props","closeFile","setState","fileToOpen","handleOpenFile","submissionid","userId","submission","state","studentdata","filter","Userid","console","log","defaults","withCredentials","get","params","filename","Filename","then","res","status","data","preview","open","userid","studentid","assignmentid","nextProps","submissions","Array","from","map","key","Username","_id","Date","Submissiontime","Graded","points","marginLeft","paddingTop","maxWidth","color","mapStateToProps"],"mappings":"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","sourcesContent":["\r\n\r\nimport React,{Component} from 'react'\r\nimport {pdfjs} from 'react-pdf';\r\nimport Moment from 'react-moment';\r\nimport OpenSubmissionFile from './OpenSubmisseionFile';\r\nimport { getSubmissions} from \"../../../actions\";\r\nimport { connect } from 'react-redux';\r\nconst axios = require('axios');\r\npdfjs.GlobalWorkerOptions.workerSrc = `//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;\r\n\r\nclass GradeAssignment extends Component{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.state={\r\n            studentdata:[],\r\n            fileToOpen:'',\r\n            open:false,\r\n            studentid:'',\r\n        }\r\n    }\r\n    closeFile = () => \r\n    {\r\n      this.setState({fileToOpen : ''});\r\n    };\r\n    componentDidMount()\r\n    {   \r\n      this.props.getSubmissions(this.props.assignmentid );\r\n    }\r\n    componentWillReceiveProps(nextProps) {\r\n  \r\n      if (nextProps.submissions) {\r\n        console.log( nextProps.submissions.submissions);\r\n          this.setState({\r\n            studentdata: nextProps.submissions.submissions\r\n          });\r\n      }\r\n      \r\n    }\r\n    handleOpenFile = (submissionid, userId) => \r\n    {\r\n      let submission = this.state.studentdata.filter(submission => {\r\n        return submission.Userid === userId });\r\n      console.log(submission)\r\n      axios.defaults.withCredentials = true;\r\n      axios.get('/submission/download',  {params : {filename :submission[0].Filename}}).then(\r\n        res => {\r\n          if(res.status ===200)\r\n            {\r\n              console.log(res.data);\r\n              let preview = 'data:application/pdf;base64, ' + res.data;\r\n              this.setState({\r\n                fileToOpen: preview})\r\n              this.setState({open:true,userid:userId})\r\n            }\r\n        }\r\n      )   \r\n   };\r\n    render()\r\n    {\r\n\r\n        var data =  Array.from(this.state.studentdata).map((data, key) => {\r\n            return (\r\n              <tr key = {key} >                              \r\n              <td >{data.Username}</td>\r\n              <td><a onClick={() =>this.handleOpenFile(data._id, data.Userid)} download>{data.Filename}</a></td>\r\n              <td> <Moment format=\"lll\" date={new Date(data.Submissiontime)}/> </td>          \r\n              <td >{data.Graded}</td>\r\n              </tr>\r\n            )\r\n            });\r\n\r\n        if(this.state.fileToOpen)\r\n           return (<OpenSubmissionFile  assignmentid={this.props.assignmentid} closeFile={this.closeFile} fileToOpen= {this.state.fileToOpen} points={this.props.points} userid={this.state.userid}/>)\r\n        else {           \r\n        return(\r\n        <div>\r\n             <table  cellpadding=\"0\" cellspacing=\"0\" className=\"table\"  cellSpacing=\"0\" style= {{marginLeft:20 , paddingTop: 0 , maxWidth:800}}>\r\n              <tr style={{color: \"#094D98\"}}>\r\n              <th>Student Name</th>\r\n              <th>Submission</th>\r\n              <th>Submission Time</th>\r\n              <th>Graded</th>\r\n              </tr>\r\n            <tbody>{data}</tbody>\r\n            <tr><td></td><td></td><td></td><td></td></tr>\r\n            </table>   \r\n           \r\n        </div>\r\n\r\n        )\r\n        }\r\n    }\r\n};\r\n\r\nfunction mapStateToProps(state) {\r\n  return { submissions: state.submissions };\r\n}\r\n      \r\nexport default connect(mapStateToProps,{ getSubmissions })(GradeAssignment);"]},"metadata":{},"sourceType":"module"}