{"ast":null,"code":"import _defineProperty from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/src/components/Profile/profile.js\";\nimport React, { Component } from 'react';\nimport Button from 'react-bootstrap/Button';\nimport { Redirect } from 'react-router';\nimport Grid from '@material-ui/core/Grid';\nimport MiniDrawer from '../Layout/MiniDrawer'; //import { getProfile } from \"../../actions\";\n//import { updateProfile } from \"../../actions\";\n\nimport { connect } from 'react-redux';\nimport { graphql, compose } from 'react-apollo';\nimport { profile } from '../../queries/queries';\nimport { updateProfile } from '../../mutations/mutations';\nimport { withApollo } from 'react-apollo';\n\nvar axios = require('axios');\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n\n    _this.handleLogout = function () {\n      axios.defaults.withCredentials = true;\n      axios.post('/users/logout').then(function (response) {\n        if (response.status === 200) {\n          console.log('User logged out successfully!');\n\n          _this.setState({\n            loggedout: true\n          });\n        }\n      });\n    };\n\n    _this.state = {\n      name: \"\",\n      email: \"\",\n      phone: \"\",\n      aboutme: \"\",\n      city: \"\",\n      country: \"\",\n      company: \"\",\n      school: \"\",\n      hometown: \"\",\n      languages: \"\",\n      submitsuccess: false,\n      loggedout: false,\n      profilechange: false,\n      image_path: '',\n      profilePicView: '',\n      profilepic: '' // male:\"\",\n      //female:\"\"\n\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleLogout = _this.handleLogout.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handlePhotoChange = _this.handlePhotoChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"handlePhotoChange\",\n    value: function handlePhotoChange() {\n      this.setState({\n        profilechange: true\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //this.props.getProfile();\n      localStorage.setItem(\"Email\", \"supriyajain5230@gmail.com\");\n      this.props.client.query({\n        query: profile,\n        variables: {\n          Email: localStorage.getItem(\"Email\")\n        }\n      }).then(function (response) {\n        console.log('Response profile', response.profile.profileData);\n        var result = response.data.profile;\n        var keyArray = Object.keys(response.data.profile);\n\n        for (var i = 0; i < keyArray.length; i++) {\n          console.log('keyArr', keyArray[i]);\n          var name = keyArray[i];\n          console.log('result[i]', result[name]);\n\n          _this2.setState(_defineProperty({}, name, result[name]));\n        }\n\n        _this2.setState({\n          name: response.data.profileData.Name\n        });\n\n        console.log('state', _this2.state);\n      });\n      console.log('data:', this.props.data);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.profiledetails) {\n        this.setState({\n          name: nextProps.profiledetails.profiledetails.data.Name,\n          email: nextProps.profiledetails.profiledetails.data.Email,\n          phone: nextProps.profiledetails.profiledetails.data.Phone,\n          aboutme: nextProps.profiledetails.profiledetails.data.Aboutme,\n          city: nextProps.profiledetails.profiledetails.data.City,\n          country: nextProps.profiledetails.profiledetails.data.Country,\n          company: nextProps.profiledetails.profiledetails.data.Company,\n          school: nextProps.profiledetails.profiledetails.data.School,\n          hometown: nextProps.profiledetails.profiledetails.data.Hometown,\n          languages: nextProps.profiledetails.profiledetails.data.Languages,\n          success: nextProps.profiledetails.profiledetails.data.Status,\n          profilepic: nextProps.profiledetails.profiledetails.data.ProfileImage,\n          profilePicView: nextProps.profiledetails.profiledetails.imageData\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var _this3 = this;\n\n      var target = event.target;\n      var name = target.name;\n\n      if (name === \"profilepic\") {\n        console.log(target.files);\n        var profilePhoto = target.files[0];\n        var data = new FormData();\n        data.append('photos', profilePhoto);\n        console.log(data);\n        axios.defaults.withCredentials = true;\n        axios.post('/users/upload-file', data).then(function (res) {\n          if (res.status === 200) {\n            console.log('Profile Photo Name: ', profilePhoto.name); //Download image\n\n            axios.post('/users/download-file/' + profilePhoto.name).then(function (res) {\n              var preview = 'data:image/jpg;base64, ' + res.data;\n\n              _this3.setState({\n                profilepic: profilePhoto.name,\n                profilePicView: preview\n              });\n            }).catch(function (err) {\n              if (err) {\n                _this3.setState({\n                  errorRedirect: true\n                });\n              }\n            });\n          }\n        });\n      } else {\n        var _event$target = event.target,\n            _name = _event$target.name,\n            value = _event$target.value;\n        this.setState(_defineProperty({}, _name, value));\n      }\n    }\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      event.preventDefault();\n      var data = {\n        name: this.state.name,\n        email: this.state.email,\n        phone: this.state.phone,\n        aboutme: this.state.aboutme,\n        city: this.state.city,\n        country: this.state.country,\n        company: this.state.company,\n        school: this.state.school,\n        hometown: this.state.hometown,\n        languages: this.state.languages,\n        profilepic: this.state.profilepic // male:\"\",\n        //female:\"\"\n\n      };\n      this.props.updateProfile(data);\n      this.props.getProfile(data);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement;\n\n      /*let redirectVar = null;\r\n      if(this.state.loggedout){\r\n          redirectVar = <Redirect to= \"/login\"/>\r\n        }\r\n       else  if(this.state.submitsuccess){\r\n          redirectVar = <Redirect to= \"/teacherdashboard\"/>\r\n        }*/\n      var profileImageData = React.createElement(\"img\", {\n        src: \"https://img.freepik.com/free-icon/user-filled-person-shape_318-74922.jpg?size=338c&ext=jpg\",\n        alt: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      });\n\n      if (this.state.profilePicView) {\n        profileImageData = React.createElement(\"img\", {\n          src: this.state.profilePicView,\n          alt: \"logo\",\n          onClick: this.handlePhotoChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 189\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4.5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(MiniDrawer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        style: {\n          backgroundColor: \"white\"\n        },\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"center-content profile-heading\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \" \", profileImageData, \" \"), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }), \"    \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0 \\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\", React.createElement(Button, {\n        variant: \"primary\",\n        onClick: this.handleLogout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, \"Logout\"), React.createElement(\"form\", {\n        method: \"post\",\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Profile Information\"), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.name,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"name\",\n        placeholder: \"Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.email,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"email\",\n        placeholder: \"Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.phone,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"phone\",\n        placeholder: \"Phone Number\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(\"textarea\", {\n        value: this.state.aboutme,\n        onChange: this.handleChange,\n        rows: \"4\",\n        cols: \"40\",\n        className: \"form-group\",\n        placeholder: \"About Me\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.city,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"city\",\n        placeholder: \"city\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.country,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"country\",\n        placeholder: \"Country\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.company,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"company\",\n        placeholder: \"Company\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.school,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"school\",\n        placeholder: \"School\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.hometown,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"hometown\",\n        placeholder: \"Hometown\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        value: this.state.languages,\n        onChange: this.handleChange,\n        type: \"text\",\n        className: \"form-control\",\n        name: \"languages\",\n        placeholder: \"Languages\",\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        class: \"row form-group\",\n        className: \"form-group\",\n        style: {\n          width: 200\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, React.createElement(\"select\", {\n        onChage: this.handlegender,\n        value: this.state.gender,\n        class: \"form-control input-lg js-input-field\",\n        id: \"profileGenderInput\",\n        \"data-input-model-name\": \"gender\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        selected: \"selected\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, \"Gender\"), React.createElement(\"option\", {\n        value: \"female\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254\n        },\n        __self: this\n      }, \"Female\"), React.createElement(\"option\", {\n        value: \"male\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Male\"), React.createElement(\"option\", {\n        value: \"other\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256\n        },\n        __self: this\n      }, \"Other\")))), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        htmlFor: \"profilepic\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }, \"Profile Image : \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261\n        },\n        __self: this\n      }), React.createElement(\"input\", (_React$createElement = {\n        type: \"file\",\n        name: \"profilepic\",\n        id: \"profilepic\",\n        className: \"btn btn-lg photo-upload-btn\",\n        onChange: this.handleChange\n      }, _defineProperty(_React$createElement, \"className\", \"btn btn-lg photo-upload-btn\"), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement))), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, \"Save Changes\")))))))));\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    profiledetails: state.profiledetails\n  };\n} //export default connect(mapStateToProps,{ getProfile, updateProfile })(Profile);\n\n\nexport default withApollo(Profile);","map":{"version":3,"sources":["/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/src/components/Profile/profile.js"],"names":["React","Component","Button","Redirect","Grid","MiniDrawer","connect","graphql","compose","profile","updateProfile","withApollo","axios","require","Profile","props","handleLogout","defaults","withCredentials","post","then","response","status","console","log","setState","loggedout","state","name","email","phone","aboutme","city","country","company","school","hometown","languages","submitsuccess","profilechange","image_path","profilePicView","profilepic","handleChange","bind","handleSubmit","handlePhotoChange","localStorage","setItem","client","query","variables","Email","getItem","profileData","result","data","keyArray","Object","keys","i","length","Name","nextProps","profiledetails","Phone","Aboutme","City","Country","Company","School","Hometown","Languages","success","Status","ProfileImage","imageData","event","target","files","profilePhoto","FormData","append","res","preview","catch","err","errorRedirect","value","preventDefault","getProfile","profileImageData","backgroundColor","width","handlegender","gender","mapStateToProps"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,wBAAnB;AACA,SAAQC,QAAR,QAAuB,cAAvB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,UAAP,MAAuB,sBAAvB,C,CACA;AACA;;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAAQC,OAAR,EAAiBC,OAAjB,QAA+B,cAA/B;AACA,SAAQC,OAAR,QAAsB,uBAAtB;AACA,SAAQC,aAAR,QAA4B,2BAA5B;AACA,SAAQC,UAAR,QAAyB,cAAzB;;AACA,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;IAKMC,O;;;;;AAEJ,mBAAYC,KAAZ,EACA;AAAA;;AAAA;;AACE,iFAAMA,KAAN;;AADF,UA2HAC,YA3HA,GA2He,YAAM;AACnBJ,MAAAA,KAAK,CAACK,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACAN,MAAAA,KAAK,CAACO,IAAN,CAAW,eAAX,EACKC,IADL,CACU,UAAAC,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,MAAT,KAAoB,GAAxB,EAA6B;AACzBC,UAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;;AACA,gBAAKC,QAAL,CAAgB;AACZC,YAAAA,SAAS,EAAC;AADE,WAAhB;AAGH;AACJ,OARL;AASH,KAtIC;;AAEE,UAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,EADG;AAETC,MAAAA,KAAK,EAAE,EAFE;AAGTC,MAAAA,KAAK,EAAC,EAHG;AAITC,MAAAA,OAAO,EAAC,EAJC;AAKTC,MAAAA,IAAI,EAAC,EALI;AAMTC,MAAAA,OAAO,EAAC,EANC;AAOTC,MAAAA,OAAO,EAAC,EAPC;AAQTC,MAAAA,MAAM,EAAC,EARE;AASTC,MAAAA,QAAQ,EAAC,EATA;AAUTC,MAAAA,SAAS,EAAC,EAVD;AAWTC,MAAAA,aAAa,EAAC,KAXL;AAYTZ,MAAAA,SAAS,EAAC,KAZD;AAaTa,MAAAA,aAAa,EAAC,KAbL;AAcTC,MAAAA,UAAU,EAAC,EAdF;AAeTC,MAAAA,cAAc,EAAC,EAfN;AAgBTC,MAAAA,UAAU,EAAC,EAhBF,CAiBV;AACC;;AAlBS,KAAb;AAoBA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBC,IAAlB,uDAApB;AACA,UAAKC,YAAL,GAAoB,MAAKA,YAAL,CAAkBD,IAAlB,uDAApB;AACA,UAAK5B,YAAL,GAAoB,MAAKA,YAAL,CAAkB4B,IAAlB,uDAApB;AACA,UAAKE,iBAAL,GAAwB,MAAKA,iBAAL,CAAuBF,IAAvB,uDAAxB;AAzBF;AA0BC;;;;wCACmB;AAClB,WAAKnB,QAAL,CAAc;AAAEc,QAAAA,aAAa,EAAE;AAAjB,OAAd;AACD;;;wCACkB;AAAA;;AACjB;AACAQ,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAAgC,2BAAhC;AACA,WAAKjC,KAAL,CAAWkC,MAAX,CAAkBC,KAAlB,CAAwB;AACpBA,QAAAA,KAAK,EAAGzC,OADY;AAEpB0C,QAAAA,SAAS,EAAE;AACPC,UAAAA,KAAK,EAAGL,YAAY,CAACM,OAAb,CAAqB,OAArB;AADD;AAFS,OAAxB,EAMEjC,IANF,CAMO,UAACC,QAAD,EAAY;AACfE,QAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,QAAQ,CAACZ,OAAT,CAAiB6C,WAAjD;AACA,YAAMC,MAAM,GAAGlC,QAAQ,CAACmC,IAAT,CAAc/C,OAA7B;AACA,YAAIgD,QAAQ,GAAGC,MAAM,CAACC,IAAP,CAAYtC,QAAQ,CAACmC,IAAT,CAAc/C,OAA1B,CAAf;;AAEA,aAAK,IAAImD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,QAAQ,CAACI,MAA7B,EAAqCD,CAAC,EAAtC,EAA0C;AACtCrC,UAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBiC,QAAQ,CAACG,CAAD,CAA9B;AACA,cAAIhC,IAAI,GAAG6B,QAAQ,CAACG,CAAD,CAAnB;AACArC,UAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyB+B,MAAM,CAAC3B,IAAD,CAA/B;;AACA,UAAA,MAAI,CAACH,QAAL,qBACKG,IADL,EACY2B,MAAM,CAAC3B,IAAD,CADlB;AAGH;;AACD,QAAA,MAAI,CAACH,QAAL,CAAc;AACVG,UAAAA,IAAI,EAAEP,QAAQ,CAACmC,IAAT,CAAcF,WAAd,CAA0BQ;AADtB,SAAd;;AAGAvC,QAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,MAAI,CAACG,KAA1B;AACC,OAvBL;AA0BAJ,MAAAA,OAAO,CAACC,GAAR,CAAY,OAAZ,EAAqB,KAAKT,KAAL,CAAWyC,IAAhC;AACD;;;8CACyBO,S,EAAW;AAEnC,UAAIA,SAAS,CAACC,cAAd,EAA8B;AAC1B,aAAKvC,QAAL,CAAc;AACVG,UAAAA,IAAI,EAAEmC,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CM,IADzC;AAEVjC,UAAAA,KAAK,EAAEkC,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CJ,KAF1C;AAGVtB,UAAAA,KAAK,EAAEiC,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CS,KAH1C;AAIVlC,UAAAA,OAAO,EAAGgC,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CU,OAJ7C;AAKVlC,UAAAA,IAAI,EAAE+B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CW,IALzC;AAMVlC,UAAAA,OAAO,EAAE8B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CY,OAN5C;AAOVlC,UAAAA,OAAO,EAAG6B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6Ca,OAP7C;AAQVlC,UAAAA,MAAM,EAAE4B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6Cc,MAR3C;AASVlC,UAAAA,QAAQ,EAAE2B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6Ce,QAT7C;AAUVlC,UAAAA,SAAS,EAAE0B,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CgB,SAV9C;AAWVC,UAAAA,OAAO,EAACV,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CkB,MAX3C;AAYVhC,UAAAA,UAAU,EAAEqB,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCR,IAAxC,CAA6CmB,YAZ/C;AAaVlC,UAAAA,cAAc,EAAEsB,SAAS,CAACC,cAAV,CAAyBA,cAAzB,CAAwCY;AAb9C,SAAd;AAeH;AACF;;;iCACYC,K,EACb;AAAA;;AACE,UAAMC,MAAM,GAAGD,KAAK,CAACC,MAArB;AACA,UAAMlD,IAAI,GAAGkD,MAAM,CAAClD,IAApB;;AACA,UAAIA,IAAI,KAAK,YAAb,EAA2B;AACvBL,QAAAA,OAAO,CAACC,GAAR,CAAYsD,MAAM,CAACC,KAAnB;AACA,YAAIC,YAAY,GAAGF,MAAM,CAACC,KAAP,CAAa,CAAb,CAAnB;AACA,YAAIvB,IAAI,GAAG,IAAIyB,QAAJ,EAAX;AAEAzB,QAAAA,IAAI,CAAC0B,MAAL,CAAY,QAAZ,EAAsBF,YAAtB;AACAzD,QAAAA,OAAO,CAACC,GAAR,CAAYgC,IAAZ;AACA5C,QAAAA,KAAK,CAACK,QAAN,CAAeC,eAAf,GAAiC,IAAjC;AACAN,QAAAA,KAAK,CAACO,IAAN,CAAW,oBAAX,EAAiCqC,IAAjC,EACKpC,IADL,CACU,UAAA+D,GAAG,EAAI;AACT,cAAIA,GAAG,CAAC7D,MAAJ,KAAe,GAAnB,EAAwB;AACpBC,YAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoCwD,YAAY,CAACpD,IAAjD,EADoB,CAGpB;;AACAhB,YAAAA,KAAK,CAACO,IAAN,CAAW,0BAA0B6D,YAAY,CAACpD,IAAlD,EACKR,IADL,CACU,UAAA+D,GAAG,EAAI;AACT,kBAAIC,OAAO,GAAG,4BAA4BD,GAAG,CAAC3B,IAA9C;;AACA,cAAA,MAAI,CAAC/B,QAAL,CAAc;AACViB,gBAAAA,UAAU,EAAEsC,YAAY,CAACpD,IADf;AAEVa,gBAAAA,cAAc,EAAE2C;AAFN,eAAd;AAKH,aARL,EAQOC,KARP,CAQa,UAACC,GAAD,EAAQ;AACb,kBAAGA,GAAH,EAAO;AACH,gBAAA,MAAI,CAAC7D,QAAL,CAAc;AACV8D,kBAAAA,aAAa,EAAE;AADL,iBAAd;AAGH;AACJ,aAdL;AAeH;AACJ,SAtBL;AAuBH,OA/BD,MAgCI;AAAA,4BACsBV,KAAK,CAACC,MAD5B;AAAA,YACOlD,KADP,iBACOA,IADP;AAAA,YACa4D,KADb,iBACaA,KADb;AAEA,aAAK/D,QAAL,qBAAiBG,KAAjB,EAAwB4D,KAAxB;AACH;AACF;;;iCAcYX,K,EACb;AACEA,MAAAA,KAAK,CAACY,cAAN;AACA,UAAMjC,IAAI,GAAE;AACR5B,QAAAA,IAAI,EAAE,KAAKD,KAAL,CAAWC,IADT;AAERC,QAAAA,KAAK,EAAE,KAAKF,KAAL,CAAWE,KAFV;AAGRC,QAAAA,KAAK,EAAE,KAAKH,KAAL,CAAWG,KAHV;AAIRC,QAAAA,OAAO,EAAE,KAAKJ,KAAL,CAAWI,OAJZ;AAKRC,QAAAA,IAAI,EAAE,KAAKL,KAAL,CAAWK,IALT;AAMRC,QAAAA,OAAO,EAAE,KAAKN,KAAL,CAAWM,OANZ;AAORC,QAAAA,OAAO,EAAE,KAAKP,KAAL,CAAWO,OAPZ;AAQRC,QAAAA,MAAM,EAAE,KAAKR,KAAL,CAAWQ,MARX;AASRC,QAAAA,QAAQ,EAAE,KAAKT,KAAL,CAAWS,QATb;AAURC,QAAAA,SAAS,EAAE,KAAKV,KAAL,CAAWU,SAVd;AAWRK,QAAAA,UAAU,EAAE,KAAKf,KAAL,CAAWe,UAXf,CAYT;AACC;;AAbQ,OAAZ;AAgBA,WAAK3B,KAAL,CAAWL,aAAX,CAAyB8C,IAAzB;AACA,WAAKzC,KAAL,CAAW2E,UAAX,CAAsBlC,IAAtB;AACD;;;6BAEQ;AAAA;;AACP;;;;;;;AAOE,UAAImC,gBAAgB,GAAG;AAAK,QAAA,GAAG,EAAC,4FAAT;AAAsG,QAAA,GAAG,EAAC,MAA1G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAvB;;AACA,UAAI,KAAKhE,KAAL,CAAWc,cAAf,EAA+B;AAC3BkD,QAAAA,gBAAgB,GAAG;AAAK,UAAA,GAAG,EAAE,KAAKhE,KAAL,CAAWc,cAArB;AAAqC,UAAA,GAAG,EAAC,MAAzC;AAAgD,UAAA,OAAO,EAAE,KAAKK,iBAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAAnB;AACH;;AAEL,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,SAAS,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,GAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CADA,EAIA,oBAAC,IAAD;AAAM,QAAA,IAAI,MAAV;AAAW,QAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,KAAK,EAAE;AAAC8C,UAAAA,eAAe,EAAG;AAAnB,SAAZ;AAA0C,QAAA,SAAS,EAAC,WAApD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,EAIA;AAAK,QAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAK,QAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAAkDD,gBAAlD,MADA,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFA,2GAGA,oBAAC,MAAD;AAAS,QAAA,OAAO,EAAC,SAAjB;AAA2B,QAAA,OAAO,EAAE,KAAK3E,YAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHA,EAIA;AAAM,QAAA,MAAM,EAAC,MAAb;AAAoB,QAAA,QAAQ,EAAE,KAAK6B,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADJ,EAGQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACgD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACC;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWC,IAAzB;AAAgC,QAAA,QAAQ,EAAI,KAAKe,YAAjD;AAA+D,QAAA,IAAI,EAAC,MAApE;AAA2E,QAAA,SAAS,EAAC,cAArF;AAAoG,QAAA,IAAI,EAAC,MAAzG;AAAgH,QAAA,WAAW,EAAC,MAA5H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CAHR,EAOQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWE,KAAzB;AAAiC,QAAA,QAAQ,EAAI,KAAKc,YAAlD;AAAgE,QAAA,IAAI,EAAC,MAArE;AAA4E,QAAA,SAAS,EAAC,cAAtF;AAAsG,QAAA,IAAI,EAAC,OAA3G;AAAmH,QAAA,WAAW,EAAC,OAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAPR,EAUQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA4B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWG,KAAzB;AAAiC,QAAA,QAAQ,EAAI,KAAKa,YAAlD;AAAgE,QAAA,IAAI,EAAC,MAArE;AAA4E,QAAA,SAAS,EAAC,cAAtF;AAAsG,QAAA,IAAI,EAAC,OAA3G;AAAmH,QAAA,WAAW,EAAC,cAA/H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAVR,EAaQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAU,QAAA,KAAK,EAAE,KAAKhB,KAAL,CAAWI,OAA5B;AAAsC,QAAA,QAAQ,EAAI,KAAKY,YAAvD;AAAqE,QAAA,IAAI,EAAC,GAA1E;AAA8E,QAAA,IAAI,EAAC,IAAnF;AAAwF,QAAA,SAAS,EAAC,YAAlG;AAA+G,QAAA,WAAW,EAAC,UAA3H;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAbR,EAkBQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWK,IAAzB;AAAgC,QAAA,QAAQ,EAAI,KAAKW,YAAjD;AAA+D,QAAA,IAAI,EAAC,MAApE;AAA2E,QAAA,SAAS,EAAC,cAArF;AAAoG,QAAA,IAAI,EAAC,MAAzG;AAAgH,QAAA,WAAW,EAAC,MAA5H;AAAmI,QAAA,QAAQ,MAA3I;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAlBR,EAsBQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWM,OAAzB;AAAmC,QAAA,QAAQ,EAAI,KAAKU,YAApD;AAAkE,QAAA,IAAI,EAAC,MAAvE;AAA8E,QAAA,SAAS,EAAC,cAAxF;AAAuG,QAAA,IAAI,EAAC,SAA5G;AAAsH,QAAA,WAAW,EAAC,SAAlI;AAA4I,QAAA,QAAQ,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CAtBR,EA0BQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWO,OAAzB;AAAmC,QAAA,QAAQ,EAAI,KAAKS,YAApD;AAAkE,QAAA,IAAI,EAAC,MAAvE;AAA8E,QAAA,SAAS,EAAC,cAAxF;AAAuG,QAAA,IAAI,EAAC,SAA5G;AAAsH,QAAA,WAAW,EAAC,SAAlI;AAA4I,QAAA,QAAQ,MAApJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,CA1BR,EA8BQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWQ,MAAzB;AAAiC,QAAA,QAAQ,EAAI,KAAKQ,YAAlD;AAAgE,QAAA,IAAI,EAAC,MAArE;AAA4E,QAAA,SAAS,EAAC,cAAtF;AAAqG,QAAA,IAAI,EAAC,QAA1G;AAAmH,QAAA,WAAW,EAAC,QAA/H;AAAwI,QAAA,QAAQ,MAAhJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CA9BR,EAkCQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWS,QAAzB;AAAoC,QAAA,QAAQ,EAAI,KAAKO,YAArD;AAAmE,QAAA,IAAI,EAAC,MAAxE;AAA+E,QAAA,SAAS,EAAC,cAAzF;AAAwG,QAAA,IAAI,EAAC,UAA7G;AAAwH,QAAA,WAAW,EAAC,UAApI;AAA+I,QAAA,QAAQ,MAAvJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CAlCR,EAsCQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAA6B,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,KAAK,EAAE,KAAKlE,KAAL,CAAWU,SAAzB;AAAsC,QAAA,QAAQ,EAAI,KAAKM,YAAvD;AAAqE,QAAA,IAAI,EAAC,MAA1E;AAAiF,QAAA,SAAS,EAAC,cAA3F;AAA0G,QAAA,IAAI,EAAC,WAA/G;AAA2H,QAAA,WAAW,EAAC,WAAvI;AAAmJ,QAAA,QAAQ,MAA3J;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADA,CAtCR,EAyCQ;AAAK,QAAA,KAAK,EAAC,gBAAX;AAA4B,QAAA,SAAS,EAAC,YAAtC;AAAoD,QAAA,KAAK,EAAE;AAACkD,UAAAA,KAAK,EAAG;AAAT,SAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI;AAAQ,QAAA,OAAO,EAAE,KAAKC,YAAtB;AAAoC,QAAA,KAAK,EAAE,KAAKnE,KAAL,CAAWoE,MAAtD;AAA8D,QAAA,KAAK,EAAC,sCAApE;AAA2G,QAAA,EAAE,EAAC,oBAA9G;AAAmI,iCAAsB,QAAzJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACQ;AAAQ,QAAA,QAAQ,EAAC,UAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADR,EAEQ;AAAQ,QAAA,KAAK,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFR,EAGQ;AAAQ,QAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHR,EAIQ;AAAQ,QAAA,KAAK,EAAC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAJR,CADJ,CADJ,CAzCR,EAmDQ;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACA;AAAO,QAAA,OAAO,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAA5B,CADA,EACqE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADrE,EAEA;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,IAAI,EAAC,YAAxB;AAAqC,QAAA,EAAE,EAAC,YAAxC;AAAqD,QAAA,SAAS,EAAC,6BAA/D;AAA6F,QAAA,QAAQ,EAAE,KAAKpD;AAA5G,4DAAoI,6BAApI;AAAA;AAAA;AAAA,uFAFA,CAnDR,EAuDQ;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,SAAS,EAAC,iBAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAvDR,CADJ,CADJ,CAJA,CAJA,CADA,CAJA,CADA,CADF;AAoFC;;;;EAlQmB1C,S;;AAqQtB,SAAS+F,eAAT,CAAyBrE,KAAzB,EAAgC;AAC5B,SAAO;AAAEqC,IAAAA,cAAc,EAAErC,KAAK,CAACqC;AAAxB,GAAP;AACD,C,CAEH;;;AACA,eAAerD,UAAU,CAACG,OAAD,CAAzB","sourcesContent":["import React, { Component } from 'react';\r\nimport Button from 'react-bootstrap/Button';\r\nimport {Redirect} from 'react-router';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport MiniDrawer from '../Layout/MiniDrawer';\r\n//import { getProfile } from \"../../actions\";\r\n//import { updateProfile } from \"../../actions\";\r\nimport { connect } from 'react-redux';\r\nimport {graphql, compose} from 'react-apollo';\r\nimport {profile} from '../../queries/queries';\r\nimport {updateProfile} from '../../mutations/mutations';\r\nimport {withApollo} from 'react-apollo';\r\nconst axios = require('axios');\r\n\r\n\r\n\r\n\r\nclass Profile extends Component \r\n{\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    this.state = {\r\n        name: \"\",\r\n        email: \"\",\r\n        phone:\"\",\r\n        aboutme:\"\",\r\n        city:\"\",\r\n        country:\"\",\r\n        company:\"\",\r\n        school:\"\",\r\n        hometown:\"\",\r\n        languages:\"\",\r\n        submitsuccess:false,\r\n        loggedout:false,\r\n        profilechange:false,\r\n        image_path:'',\r\n        profilePicView:'',\r\n        profilepic:''\r\n       // male:\"\",\r\n        //female:\"\"\r\n    };\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleLogout = this.handleLogout.bind(this);\r\n    this.handlePhotoChange= this.handlePhotoChange.bind(this);\r\n  }\r\n  handlePhotoChange() {\r\n    this.setState({ profilechange: true });\r\n  }\r\n  componentDidMount(){\r\n    //this.props.getProfile();\r\n    localStorage.setItem(\"Email\" ,  \"supriyajain5230@gmail.com\")\r\n    this.props.client.query({\r\n        query : profile,\r\n        variables: {\r\n            Email : localStorage.getItem(\"Email\")\r\n        },\r\n    }\r\n    ).then((response)=>{\r\n        console.log('Response profile', response.profile.profileData);\r\n        const result = response.data.profile;\r\n        var keyArray = Object.keys(response.data.profile);\r\n\r\n        for (var i = 0; i < keyArray.length; i++) {\r\n            console.log('keyArr', keyArray[i]);\r\n            var name = keyArray[i];\r\n            console.log('result[i]', result[name])\r\n            this.setState({\r\n                [name]: result[name]\r\n            });\r\n        }\r\n        this.setState({\r\n            name: response.data.profileData.Name,\r\n        });\r\n        console.log('state', this.state);\r\n        });\r\n    \r\n\r\n    console.log('data:', this.props.data);\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n  \r\n    if (nextProps.profiledetails) {\r\n        this.setState({\r\n            name: nextProps.profiledetails.profiledetails.data.Name,\r\n            email: nextProps.profiledetails.profiledetails.data.Email,\r\n            phone: nextProps.profiledetails.profiledetails.data.Phone,\r\n            aboutme:  nextProps.profiledetails.profiledetails.data.Aboutme,\r\n            city: nextProps.profiledetails.profiledetails.data.City,    \r\n            country: nextProps.profiledetails.profiledetails.data.Country,\r\n            company:  nextProps.profiledetails.profiledetails.data.Company,\r\n            school: nextProps.profiledetails.profiledetails.data.School,\r\n            hometown: nextProps.profiledetails.profiledetails.data.Hometown,\r\n            languages: nextProps.profiledetails.profiledetails.data.Languages,\r\n            success:nextProps.profiledetails.profiledetails.data.Status,\r\n            profilepic: nextProps.profiledetails.profiledetails.data.ProfileImage,\r\n            profilePicView: nextProps.profiledetails.profiledetails.imageData\r\n        });\r\n    }\r\n  }\r\n  handleChange(event)\r\n  {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    if (name === \"profilepic\") {\r\n        console.log(target.files);\r\n        var profilePhoto = target.files[0];\r\n        var data = new FormData();\r\n\r\n        data.append('photos', profilePhoto);\r\n        console.log(data)\r\n        axios.defaults.withCredentials = true;\r\n        axios.post('/users/upload-file', data)\r\n            .then(res => {\r\n                if (res.status === 200) {\r\n                    console.log('Profile Photo Name: ', profilePhoto.name);\r\n\r\n                    //Download image\r\n                    axios.post('/users/download-file/' + profilePhoto.name)\r\n                        .then(res => {\r\n                            let preview = 'data:image/jpg;base64, ' + res.data;\r\n                            this.setState({\r\n                                profilepic: profilePhoto.name,\r\n                                profilePicView: preview\r\n                            })\r\n\r\n                        }).catch((err) =>{\r\n                            if(err){\r\n                                this.setState({\r\n                                    errorRedirect: true\r\n                                })\r\n                            }\r\n                        });\r\n                }\r\n            });\r\n    }\r\n    else{\r\n        const {name, value} = event.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n  }\r\n\r\n  handleLogout = () => {\r\n    axios.defaults.withCredentials = true;\r\n    axios.post('/users/logout')\r\n        .then(response => {\r\n            if (response.status === 200) {\r\n                console.log('User logged out successfully!');\r\n                this.setState ( {\r\n                    loggedout:true,\r\n                        });\r\n            }\r\n        });\r\n}\r\n  handleSubmit(event)\r\n  {\r\n    event.preventDefault();\r\n    const data ={\r\n        name: this.state.name,\r\n        email: this.state.email,\r\n        phone: this.state.phone,\r\n        aboutme: this.state.aboutme,\r\n        city: this.state.city,\r\n        country: this.state.country,\r\n        company: this.state.company,\r\n        school: this.state.school,\r\n        hometown: this.state.hometown,\r\n        languages: this.state.languages,\r\n        profilepic: this.state.profilepic\r\n       // male:\"\",\r\n        //female:\"\"\r\n        \r\n    };\r\n    this.props.updateProfile(data);\r\n    this.props.getProfile(data);\r\n  }\r\n\r\n  render() {\r\n    /*let redirectVar = null;\r\n    if(this.state.loggedout){\r\n        redirectVar = <Redirect to= \"/login\"/>\r\n      }\r\n     else  if(this.state.submitsuccess){\r\n        redirectVar = <Redirect to= \"/teacherdashboard\"/>\r\n      }*/\r\n      let profileImageData = <img src=\"https://img.freepik.com/free-icon/user-filled-person-shape_318-74922.jpg?size=338c&ext=jpg\" alt=\"logo\" />\r\n      if (this.state.profilePicView) {\r\n          profileImageData = <img src={this.state.profilePicView} alt=\"logo\" onClick={this.handlePhotoChange}/>\r\n      }\r\n\r\n  return (\r\n    <div>\r\n    <Grid container>   \r\n    <Grid item xs={4.5}>\r\n    <MiniDrawer/>\r\n    </Grid>                    \r\n    <Grid item xs={8}>\r\n    <div style={{backgroundColor : \"white\"}}  className=\"container\">\r\n    <br/>\r\n \r\n\r\n    <div className=\"container\"> \r\n    <div className=\"center-content profile-heading\"> {profileImageData} </div>\r\n    <br/>    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n    <Button  variant=\"primary\" onClick={this.handleLogout} >Logout</Button>\r\n    <form method=\"post\" onSubmit={this.handleSubmit} >\r\n        <div >\r\n            <div>\r\n                <h1>Profile Information</h1>\r\n                    \r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                     <input value={this.state.name}  onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"name\" placeholder=\"Name\" />\r\n                      </div>\r\n                    \r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                        <input value={this.state.email}  onChange = {this.handleChange} type=\"text\" className=\"form-control\"  name=\"email\" placeholder=\"Email\" />\r\n                    </div>\r\n                    <div className=\"form-group\" style={{width : 200}}>\r\n                        <input value={this.state.phone}  onChange = {this.handleChange} type=\"text\" className=\"form-control\"  name=\"phone\" placeholder=\"Phone Number\" />\r\n                    </div>\r\n                    <div>\r\n                        <textarea value={this.state.aboutme}  onChange = {this.handleChange} rows=\"4\" cols=\"40\" className=\"form-group\" placeholder=\"About Me\">\r\n                        </textarea>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}} >\r\n                        <input value={this.state.city}  onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"city\" placeholder=\"city\" required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                        <input value={this.state.country}  onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"country\" placeholder=\"Country\" required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                        <input value={this.state.company}  onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"company\" placeholder=\"Company\" required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                    <input value={this.state.school} onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"school\" placeholder=\"School\" required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                    <input value={this.state.hometown}  onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"hometown\" placeholder=\"Hometown\" required/>\r\n                    </div>\r\n\r\n                    <div className=\"form-group\"  style={{width : 200}}>\r\n                    <input value={this.state.languages}   onChange = {this.handleChange} type=\"text\" className=\"form-control\" name=\"languages\" placeholder=\"Languages\" required/>\r\n                    </div>\r\n                    <div class=\"row form-group\" className=\"form-group\"  style={{width : 200}} >\r\n                        <div >\r\n                            <select onChage={this.handlegender} value={this.state.gender} class=\"form-control input-lg js-input-field\" id=\"profileGenderInput\" data-input-model-name=\"gender\">\r\n                                    <option selected=\"selected\">Gender</option>\r\n                                    <option value=\"female\">Female</option>\r\n                                    <option value=\"male\">Male</option>\r\n                                    <option value=\"other\">Other</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group\">\r\n                    <label htmlFor=\"profilepic\"><strong>Profile Image : </strong></label><br />\r\n                    <input type=\"file\" name=\"profilepic\" id=\"profilepic\" className=\"btn btn-lg photo-upload-btn\" onChange={this.handleChange} className=\"btn btn-lg photo-upload-btn\" />\r\n                    </div>\r\n                    <button type=\"submit\" className=\"btn btn-primary\">Save Changes</button>   \r\n                \r\n                   \r\n            </div>\r\n        </div>\r\n        </form>\r\n    </div>\r\n    </div>\r\n    </Grid>\r\n    </Grid>\r\n    </div>\r\n  );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return { profiledetails: state.profiledetails };\r\n  }\r\n\r\n//export default connect(mapStateToProps,{ getProfile, updateProfile })(Profile);\r\nexport default withApollo(Profile);"]},"metadata":{},"sourceType":"module"}