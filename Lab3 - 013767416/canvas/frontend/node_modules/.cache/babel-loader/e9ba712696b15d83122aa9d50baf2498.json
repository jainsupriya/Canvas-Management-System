{"ast":null,"code":"import _defineProperty from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/src/components/Courses/Courses.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport './courses.css';\nimport Button from 'react-bootstrap/Button';\nimport CreateCourse from './CreateCourse';\nimport { Table } from 'reactstrap';\nimport Divider from '@material-ui/core/Divider';\nimport SearchCourses from './SearchCourses';\nimport Grid from '@material-ui/core/Grid';\nimport MiniDrawer from '../Layout/MiniDrawer';\nimport LongMenu from '../Layout/LongMenu';\nimport cookie from 'react-cookies';\nimport { withStyles } from '@material-ui/core/styles';\nimport { Redirect } from 'react-router';\nimport { getCourses } from \"../../actions\";\nimport { connect } from 'react-redux';\nimport TablePaginationActions from '../../TablePaginationActions';\nimport TablePagination from '@material-ui/core/TablePagination'; //import Table from '@material-ui/core/Table';\n\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableFooter from '@material-ui/core/TableFooter'; //import TablePagination from '@material-ui/core/TablePagination';\n\nimport TableRow from '@material-ui/core/TableRow';\nimport { course } from '../../queries/queries';\nimport { graphql } from 'react-apollo';\nimport { withApollo } from 'react-apollo';\n\nvar axios = require('axios');\n\nvar styles = function styles(theme) {\n  return {\n    root: {\n      width: '100%',\n      marginTop: theme.spacing.unit * 3\n    },\n    table: {\n      minWidth: 500\n    },\n    tableWrapper: {\n      overflowX: 'auto'\n    }\n  };\n};\n\nvar Course =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Course, _Component);\n\n  function Course(props) {\n    var _this;\n\n    _classCallCheck(this, Course);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Course).call(this, props));\n\n    _this.handleChangePage = function (event, page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.handleChangeRowsPerPage = function (event) {\n      _this.setState({\n        page: 0,\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.addCourse = function (course) {\n      var coursesarray = [].concat(_toConsumableArray(_this.state.courses), [course]);\n\n      _this.setState({\n        courses: coursesarray\n      });\n    };\n\n    _this.state = {\n      show: false,\n      courses: [],\n      role: localStorage.getItem(\"role\"),\n      page: 0,\n      rowsPerPage: 5\n    };\n    return _this;\n  }\n\n  _createClass(Course, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      //this.props.getCourses();\n      localStorage.setItem(\"Email\", \"supriyajain5230@gmail.com\");\n      this.props.client.query({\n        query: course,\n        variables: {\n          Email: localStorage.getItem(\"Email\")\n        }\n      }).then(function (response) {\n        console.log('Response', response.data.course.courses);\n\n        _this2.setState({\n          courses: response.data.course.courses\n        });\n\n        console.log('state', _this2.state);\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      if (nextProps.courseStore.result) {\n        this.setState({\n          courses: nextProps.courseStore.result\n        });\n      }\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id) {\n      var _this3 = this;\n\n      axios.defaults.withCredentials = true;\n      var cid = {\n        courseid: id\n      };\n\n      if (localStorage.getItem(\"role\") === 'Student') {\n        axios.post('/dropcourse', cid).then(function (res) {\n          if (res.status === 200) {\n            var _course = _this3.state.courses.filter(function (course) {\n              return course.courseid !== id;\n            });\n\n            _this3.setState({\n              courses: _course\n            });\n\n            console.log(_this3.state.courses);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$state = this.state,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page;\n      var classes = this.props.classes;\n      var emptyRows = rowsPerPage - Math.min(rowsPerPage, this.state.courses.length - page * rowsPerPage);\n      var show = this.state.show;\n      var colon = ':';\n      var tableData = Array.from(this.state.courses.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)).map(function (course, key) {\n        console.log(course._id);\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \" \", React.createElement(Link, {\n          to: \"/course/\" + course._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, course.Term, colon, course.Name)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144\n          },\n          __self: this\n        }, course.Dept, course.Nickname), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, course.Term), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, course.Published), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        }, React.createElement(LongMenu, {\n          delete: function _delete() {\n            return _this4.handleDelete(course._id);\n          },\n          edit: function edit() {\n            return _this4.handleEdit(course._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147\n          },\n          __self: this\n        })));\n      });\n      return React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Grid, {\n        item: true,\n        xs: 4.5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(MiniDrawer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          marginLeft: 25\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \" All Courses\"), React.createElement(Divider, {\n        variant: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"btn-add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, !show && localStorage.getItem(\"role\") === 'Teacher' && React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Add Course\")), React.createElement(\"div\", {\n        className: classes.tableWrapper,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: classes.table,\n        style: {\n          marginLeft: 20\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165\n        },\n        __self: this\n      }, React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, this.state.courses.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (course) {\n        return React.createElement(TableRow, {\n          key: course._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/course/\" + course._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, course.Term, colon, course.Name)), React.createElement(TableCell, {\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, course.Dept, course.Nickname), React.createElement(TableCell, {\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }, course.Term), React.createElement(TableCell, {\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 174\n          },\n          __self: this\n        }, course.Published), React.createElement(TableCell, {\n          align: \"right\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, React.createElement(LongMenu, {\n          delete: function _delete() {\n            return _this4.handleDelete(course._id);\n          },\n          edit: function edit() {\n            return _this4.handleEdit(course._id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        })));\n      }), emptyRows > 0 && React.createElement(TableRow, {\n        style: {\n          height: 48 * emptyRows\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        colSpan: 6,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }))), React.createElement(TableFooter, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(TablePagination, {\n        rowsPerPageOptions: [5, 10, 25],\n        colSpan: 3,\n        count: this.state.courses.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        SelectProps: {\n          native: true\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.handleChangeRowsPerPage,\n        ActionsComponent: TablePaginationActions,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }))))), this.state.role === 'Teacher' && show && React.createElement(CreateCourse, {\n        add: this.addCourse,\n        close: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }), this.state.role === 'Student' && show && React.createElement(SearchCourses, {\n        add: this.addCourse,\n        handleShow: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Course;\n}(Component);\n\nfunction mapStateToProps(state) {\n  return {\n    courseStore: state.courses\n  };\n} //export default connect(mapStateToProps,{ getCourses })(Course);\n//export default connect(mapStateToProps,{ getCourses})( withStyles(styles)(Course));\n\n\nexport default withApollo(withStyles(styles)(Course));","map":{"version":3,"sources":["/Users/supriyajain/Desktop/273/Github/CMPE273-SP19-18/Lab3 - 013767416/canvas/frontend/src/components/Courses/Courses.js"],"names":["React","Component","Link","Button","CreateCourse","Table","Divider","SearchCourses","Grid","MiniDrawer","LongMenu","cookie","withStyles","Redirect","getCourses","connect","TablePaginationActions","TablePagination","TableBody","TableCell","TableFooter","TableRow","course","graphql","withApollo","axios","require","styles","theme","root","width","marginTop","spacing","unit","table","minWidth","tableWrapper","overflowX","Course","props","handleChangePage","event","page","setState","handleChangeRowsPerPage","rowsPerPage","target","value","handleShow","show","handleClose","addCourse","coursesarray","state","courses","role","localStorage","getItem","setItem","client","query","variables","Email","then","response","console","log","data","nextProps","courseStore","result","name","id","defaults","withCredentials","cid","courseid","post","res","status","filter","classes","emptyRows","Math","min","length","colon","tableData","Array","from","slice","map","key","_id","Term","Name","Dept","Nickname","Published","handleDelete","handleEdit","marginLeft","height","native","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport './courses.css';\r\nimport Button from 'react-bootstrap/Button';\r\nimport CreateCourse from './CreateCourse';\r\nimport { Table } from 'reactstrap';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport SearchCourses from './SearchCourses';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport MiniDrawer from '../Layout/MiniDrawer';\r\nimport LongMenu from '../Layout/LongMenu';\r\nimport cookie from 'react-cookies';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport {Redirect} from 'react-router';\r\nimport { getCourses } from \"../../actions\";\r\nimport { connect } from 'react-redux';\r\nimport TablePaginationActions  from '../../TablePaginationActions';\r\nimport TablePagination from '@material-ui/core/TablePagination';\r\n//import Table from '@material-ui/core/Table';\r\nimport TableBody from '@material-ui/core/TableBody';\r\nimport TableCell from '@material-ui/core/TableCell';\r\nimport TableFooter from '@material-ui/core/TableFooter';\r\n//import TablePagination from '@material-ui/core/TablePagination';\r\nimport TableRow from '@material-ui/core/TableRow';\r\nimport {course} from '../../queries/queries';\r\nimport { graphql } from 'react-apollo';\r\nimport {withApollo} from 'react-apollo';\r\nconst axios = require('axios');\r\n\r\n\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    width: '100%',\r\n    marginTop: theme.spacing.unit * 3,\r\n  },\r\n  table: {\r\n    minWidth: 500,\r\n  },\r\n  tableWrapper: {\r\n    overflowX: 'auto',\r\n  },\r\n});\r\n\r\n\r\nclass Course extends Component \r\n{\r\n  constructor(props)\r\n  {\r\n    super(props);\r\n    this.state = {\r\n      show:false,\r\n      courses:[],\r\n      role:localStorage.getItem(\"role\"),\r\n      page: 0,\r\n      rowsPerPage: 5,\r\n      };\r\n  }\r\n    componentDidMount()\r\n    {\r\n      //this.props.getCourses();\r\n      localStorage.setItem(\"Email\" ,  \"supriyajain5230@gmail.com\")\r\n      this.props.client.query({\r\n          query : course,\r\n          variables: {\r\n              Email : localStorage.getItem(\"Email\")\r\n          },\r\n      }\r\n      ).then((response)=>{\r\n          console.log('Response',  response.data.course.courses);\r\n\r\n          this.setState({\r\n            courses: response.data.course.courses\r\n          });\r\n          console.log('state', this.state);\r\n          });\r\n    }\r\n\r\n    handleChangePage = (event, page) => {\r\n      this.setState({ page });\r\n    };\r\n\r\n    handleChangeRowsPerPage = event => {\r\n      this.setState({ page: 0, rowsPerPage: event.target.value });\r\n    };\r\n\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n      if (nextProps.courseStore.result) {\r\n          this.setState({\r\n            courses: nextProps.courseStore.result\r\n          });\r\n      }\r\n    }\r\n    handleShow = () => {\r\n     this.setState({show:true})\r\n    };\r\n    handleClose= () => {\r\n      this.setState({show:false})\r\n     };\r\n    handleChange(event)\r\n    {\r\n      const {name, value} = event.target;\r\n      this.setState({ [name]: value });\r\n    }\r\n    addCourse = (course) =>{\r\n      let coursesarray = [...this.state.courses, course];\r\n      this.setState({ courses: coursesarray});\r\n    }\r\n    handleDelete(id){\r\n      axios.defaults.withCredentials = true;\r\n      const cid ={\r\n        courseid : id\r\n      }\r\n      if(localStorage.getItem(\"role\")==='Student')\r\n      {\r\n        axios.post('/dropcourse', cid ).then(\r\n          res => {\r\n            if(res.status ===200)\r\n              {\r\n                let course = this.state.courses.filter(course => {\r\n                return course.courseid !== id });\r\n                this.setState({courses:course});\r\n                console.log(this.state.courses)\r\n              }\r\n          }\r\n        )\r\n      }\r\n    }\r\n\r\n  render() {\r\n    const {  rowsPerPage, page } = this.state;\r\n    const { classes } = this.props;\r\n    const emptyRows = rowsPerPage - Math.min(rowsPerPage, this.state.courses.length - page * rowsPerPage);\r\n\r\n\r\n    const { show } = this.state;\r\n    var colon =':';\r\n    var tableData = Array.from(this.state.courses.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)).map((course, key) => {    \r\n      console.log(course._id) ;\r\n      return ( \r\n        <tr key = {key}>         \r\n            <td> <Link to={\"/course/\"+course._id}>{course.Term}{colon}{course.Name}</Link></td>\r\n            <td>{course.Dept}{course.Nickname}</td>\r\n            <td>{course.Term}</td>\r\n            <td>{course.Published}</td>\r\n           <td><LongMenu delete={() =>this.handleDelete(course._id)} edit={() =>this.handleEdit(course._id)}/></td>\r\n        </tr>\r\n      )\r\n    })\r\n\r\n  return (\r\n      <Grid container>   \r\n        <Grid item xs={4.5}>\r\n          <MiniDrawer/>\r\n        </Grid>                    \r\n        <Grid item xs={10}><br/>\r\n          <div>\r\n            <h4 style = {{marginLeft: 25} }> All Courses \r\n            </h4> \r\n            <Divider variant=\"middle\" />\r\n  <div className=\"btn-add\">{!show && localStorage.getItem(\"role\")==='Teacher' && <Button variant=\"outline-primary\"  onClick={this.handleShow}>Add Course</Button>}</div> \r\n            \r\n                <div className={classes.tableWrapper}>\r\n                  <Table className={classes.table} style={{marginLeft:20}}>\r\n                    <TableBody>\r\n                      {this.state.courses.slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(course => (\r\n                        <TableRow key={course._id}>\r\n                          <TableCell component=\"th\" scope=\"row\">\r\n                          <Link to={\"/course/\"+course._id}>{course.Term}{colon}{course.Name}</Link>\r\n                          </TableCell>\r\n                          <TableCell align=\"right\">{course.Dept}{course.Nickname}</TableCell>\r\n                          <TableCell align=\"right\">{course.Term}</TableCell>\r\n                          <TableCell align=\"right\">{course.Published}</TableCell>\r\n                          <TableCell align=\"right\"><LongMenu delete={() =>this.handleDelete(course._id)} edit={() =>this.handleEdit(course._id)}/></TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                      {emptyRows > 0 && (\r\n                        <TableRow style={{ height: 48 * emptyRows }}>\r\n                          <TableCell colSpan={6} />\r\n                        </TableRow>\r\n                      )}\r\n                    </TableBody>\r\n                    <TableFooter>\r\n                      <TableRow>\r\n                        <TablePagination\r\n                          rowsPerPageOptions={[5, 10, 25]}\r\n                          colSpan={3}\r\n                          count={this.state.courses.length}\r\n                          rowsPerPage={rowsPerPage}\r\n                          page={page}\r\n                          SelectProps={{\r\n                            native: true,\r\n                          }}\r\n                          onChangePage={this.handleChangePage}\r\n                          onChangeRowsPerPage={this.handleChangeRowsPerPage}\r\n                          ActionsComponent={TablePaginationActions}\r\n                        />\r\n                      </TableRow>\r\n                    </TableFooter>\r\n                  </Table>\r\n                </div>\r\n           \r\n            {this.state.role==='Teacher' && show && <CreateCourse  add={this.addCourse} close={this.handleClose}/> }\r\n            {this.state.role==='Student' && show && <SearchCourses add={this.addCourse} handleShow={this.handleShow}/> }\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n\r\n\r\n      \r\n  );\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return { courseStore: state.courses };\r\n}\r\n\r\n//export default connect(mapStateToProps,{ getCourses })(Course);\r\n//export default connect(mapStateToProps,{ getCourses})( withStyles(styles)(Course));\r\n\r\nexport default withApollo(withStyles(styles)(Course));"]},"metadata":{},"sourceType":"module"}