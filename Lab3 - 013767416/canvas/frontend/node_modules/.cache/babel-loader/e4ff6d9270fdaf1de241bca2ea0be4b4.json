{"ast":null,"code":"'use strict';\n\nexports.__esModule = true;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar without = function without(object, key) {\n  var copy = _extends({}, object);\n\n  delete copy[key];\n  return copy;\n};\n\nvar removeField = function removeField(fields, path) {\n  var dotIndex = path.indexOf('.');\n  var openIndex = path.indexOf('[');\n  var closeIndex = path.indexOf(']');\n\n  if (openIndex > 0 && closeIndex !== openIndex + 1) {\n    throw new Error('found [ not followed by ]');\n  }\n\n  if (openIndex > 0 && (dotIndex < 0 || openIndex < dotIndex)) {\n    // array field\n    var key = path.substring(0, openIndex);\n\n    if (!Array.isArray(fields[key])) {\n      return without(fields, key);\n    }\n\n    var rest = path.substring(closeIndex + 1);\n\n    if (rest[0] === '.') {\n      rest = rest.substring(1);\n    }\n\n    if (rest) {\n      var _extends2;\n\n      var copy = [];\n      fields[key].forEach(function (item, index) {\n        var result = removeField(item, rest);\n\n        if (Object.keys(result).length) {\n          copy[index] = result;\n        }\n      });\n      return copy.length ? _extends({}, fields, (_extends2 = {}, _extends2[key] = copy, _extends2)) : without(fields, key);\n    }\n\n    return without(fields, key);\n  }\n\n  if (dotIndex > 0) {\n    var _extends3; // subobject field\n\n\n    var _key = path.substring(0, dotIndex);\n\n    var _rest = path.substring(dotIndex + 1);\n\n    if (!fields[_key]) {\n      return fields;\n    }\n\n    var result = removeField(fields[_key], _rest);\n    return Object.keys(result).length ? _extends({}, fields, (_extends3 = {}, _extends3[_key] = removeField(fields[_key], _rest), _extends3)) : without(fields, _key);\n  }\n\n  return without(fields, path);\n};\n\nexports.default = removeField;","map":null,"metadata":{},"sourceType":"script"}