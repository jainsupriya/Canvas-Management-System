{"ast":null,"code":"import _defineProperty from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _toConsumableArray from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/src/components/Courses/Courses.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport './courses.css';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal';\nimport CreateCourse from './CreateCourse';\nimport { Table } from 'reactstrap';\nimport Divider from '@material-ui/core/Divider';\nimport SearchCourses from './SearchCourses';\nimport Grid from '@material-ui/core/Grid';\nimport Layout from '../Layout/Layout';\nimport MiniDrawer from '../Layout/MiniDrawer';\nimport LongMenu from '../Layout/LongMenu';\nimport cookie from 'react-cookies';\nimport { Redirect } from 'react-router';\n\nvar axios = require('axios');\n\nvar Course =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Course, _Component);\n\n  function Course(props) {\n    var _this;\n\n    _classCallCheck(this, Course);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Course).call(this, props));\n\n    _this.handleShow = function () {\n      _this.setState({\n        show: true\n      });\n    };\n\n    _this.handleClose = function () {\n      _this.setState({\n        show: false\n      });\n    };\n\n    _this.addCourse = function (course) {\n      console.log(course);\n      var coursesarray = [].concat(_toConsumableArray(_this.state.courses), [course]);\n      console.log(coursesarray);\n\n      _this.setState({\n        courses: coursesarray\n      });\n\n      console.log(_this.state.courses);\n    };\n\n    _this.state = {\n      show: false,\n      courses: [],\n      role: localStorage.getItem(\"role\")\n    }; //this.handleShow = this.handleShow.bind(this);\n\n    return _this;\n  }\n\n  _createClass(Course, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      axios.defaults.withCredentials = true;\n      axios.get('/courses').then(function (res) {\n        if (res.status === 200) {\n          _this2.setState({\n            courses: res.data\n          });\n\n          console.log(_this2.state.courses);\n        }\n      });\n    }\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      this.setState(_defineProperty({}, name, value));\n    }\n  }, {\n    key: \"handleDelete\",\n    value: function handleDelete(id) {\n      var _this3 = this;\n\n      axios.defaults.withCredentials = true;\n      var cid = {\n        courseid: id\n      };\n\n      if (localStorage.getItem(\"role\") === 'Student') {\n        axios.post('/dropcourse', cid).then(function (res) {\n          if (res.status === 200) {\n            var course = _this3.state.courses.filter(function (course) {\n              return course.courseid !== id;\n            });\n\n            _this3.setState({\n              courses: course\n            });\n\n            console.log(_this3.state.courses);\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var redirectVar = null;\n      if (!cookie.load('cookie')) redirectVar = React.createElement(Redirect, {\n        to: \"/login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      });\n      var show = this.state.show;\n      var colon = ':';\n      var tableData = Array.from(this.state.courses).map(function (course, key) {\n        return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, \" \", React.createElement(Link, {\n          to: \"/course/\" + course.courseid,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, course.term, colon, course.name)), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, course.dept, \" \\xA0\", course.nickname), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, course.term), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, course.published), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(LongMenu, {\n          delete: function _delete() {\n            return _this4.handleDelete(course.courseid);\n          },\n          edit: function edit() {\n            return _this4.handleEdit(course.courseid);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        })));\n      });\n      return React.createElement(Grid, {\n        container: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, \"   \", redirectVar, React.createElement(Grid, {\n        item: true,\n        xs: 4.5,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, React.createElement(MiniDrawer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108\n        },\n        __self: this\n      })), React.createElement(Grid, {\n        item: true,\n        xs: 10,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        style: {\n          marginLeft: 25\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, \" All Courses\"), React.createElement(Divider, {\n        variant: \"middle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"btn-add\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"outline-primary\",\n        onClick: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"Add Course\")), React.createElement(Table, {\n        hover: true,\n        style: {\n          marginLeft: 25\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Course Name\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"NickName\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, \"Term\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"Published\"), React.createElement(\"th\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, tableData, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      })))), this.state.role === 'Teacher' && show && React.createElement(CreateCourse, {\n        add: this.addCourse,\n        close: this.handleClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }), this.state.role === 'Student' && show && React.createElement(SearchCourses, {\n        add: this.addCourse,\n        handleShow: this.handleShow,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return Course;\n}(Component);\n\nexport default Course;","map":{"version":3,"sources":["/Users/supriyajain/Desktop/273/canvas/Lab1 - 013767416/canvas/frontend/src/components/Courses/Courses.js"],"names":["React","Component","Link","Button","Modal","CreateCourse","Table","Divider","SearchCourses","Grid","Layout","MiniDrawer","LongMenu","cookie","Redirect","axios","require","Course","props","handleShow","setState","show","handleClose","addCourse","course","console","log","coursesarray","state","courses","role","localStorage","getItem","defaults","withCredentials","get","then","res","status","data","event","target","name","value","id","cid","courseid","post","filter","redirectVar","load","colon","tableData","Array","from","map","key","term","dept","nickname","published","handleDelete","handleEdit","marginLeft"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport {Link} from 'react-router-dom';\nimport './courses.css';\nimport Button from 'react-bootstrap/Button';\nimport Modal from 'react-bootstrap/Modal'\nimport CreateCourse from './CreateCourse';\nimport { Table } from 'reactstrap';\nimport Divider from '@material-ui/core/Divider';\nimport SearchCourses from './SearchCourses';\nimport Grid from '@material-ui/core/Grid';\nimport Layout from '../Layout/Layout';\nimport MiniDrawer from '../Layout/MiniDrawer';\nimport LongMenu from '../Layout/LongMenu';\nimport cookie from 'react-cookies';\nimport {Redirect} from 'react-router';\nconst axios = require('axios');\n\nclass Course extends Component \n{\n  constructor(props)\n  {\n  super(props);\n\n\n    this.state = {\n      show:false,\n      courses:[],\n      role:localStorage.getItem(\"role\")\n      };\n      //this.handleShow = this.handleShow.bind(this);\n  }\n\n    componentDidMount()\n    {\n      axios.defaults.withCredentials = true;\n      axios.get('/courses').then(\n          res => {\n              if(res.status ===200)\n              {\n                  this.setState({courses: res.data});\n                  console.log(this.state.courses);\n              }\n              \n          }\n      )\n    }\n    handleShow = () => {\n     this.setState({show:true})\n    };\n    handleClose= () => {\n      this.setState({show:false})\n     };\n    handleChange(event)\n    {\n      const {name, value} = event.target;\n      this.setState({ [name]: value });\n    }\n    addCourse = (course) =>{\n      console.log(course);\n      let coursesarray = [...this.state.courses, course];\n      console.log(coursesarray);\n      this.setState({ courses: coursesarray});\n      console.log(this.state.courses);\n    }\n    handleDelete(id){\n      axios.defaults.withCredentials = true;\n      const cid ={\n        courseid : id\n      }\n      if(localStorage.getItem(\"role\")==='Student')\n      {\n        axios.post('/dropcourse', cid ).then(\n          res => {\n            if(res.status ===200)\n              {\n                let course = this.state.courses.filter(course => {\n                return course.courseid !== id });\n                this.setState({courses:course});\n                console.log(this.state.courses)\n              }\n          }\n        )\n      }\n    }\n\n  render() {\n    let redirectVar = null;\n    if(!cookie.load('cookie'))\n        redirectVar = <Redirect to= \"/login\"/>\n\n    const { show } = this.state;\n    var colon =':';\n    var tableData = Array.from(this.state.courses).map((course, key) => {           \n      return ( \n        <tr key = {key}>         \n            <td> <Link to={\"/course/\"+course.courseid}>{course.term}{colon}{course.name}</Link></td>\n            <td>{course.dept} &nbsp;{course.nickname}</td>\n            <td>{course.term}</td>\n            <td>{course.published}</td>\n           <td><LongMenu delete={() =>this.handleDelete(course.courseid)} edit={() =>this.handleEdit(course.courseid)}/></td>\n        </tr>\n      )\n    })\n\n  return (\n      <Grid container>   {redirectVar}\n        <Grid item xs={4.5}>\n          <MiniDrawer/>\n        </Grid>                    \n        <Grid item xs={10}><br/>\n          <div>\n            <h4 style = {{marginLeft: 25} }> All Courses \n            </h4> \n            <Divider variant=\"middle\" />\n              <div className=\"btn-add\"><Button variant=\"outline-primary\"  onClick={this.handleShow}>Add Course</Button></div> \n              <Table hover  style = {{marginLeft: 25} }>\n              <thead>\n              <tr>\n              <th>Course Name</th>\n              <th>NickName</th>\n              <th>Term</th>\n              <th>Published</th>\n              <th></th>\n              </tr>\n              </thead>\n              <tbody>\n              {tableData}\n              <tr><td></td><td></td><td></td><td></td><td></td></tr>\n              </tbody>\n              </Table>\n            {this.state.role==='Teacher' && show && <CreateCourse  add={this.addCourse} close={this.handleClose}/> }\n            {this.state.role==='Student' && show && <SearchCourses add={this.addCourse} handleShow={this.handleShow}/> }\n          </div>\n        </Grid>\n      </Grid>\n\n\n      \n  );\n  }\n}\n\nexport default Course;\n\n"]},"metadata":{},"sourceType":"module"}